buildscript {
  repositories {
    mavenCentral()
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }
  dependencies {
    classpath "com.diffplug.spotless:spotless-plugin-gradle:3.13.0"
    classpath "com.geirsson:scalafmt-core_${scalaVersion}:1.5.0"
  }
}

allprojects {
  apply plugin: com.diffplug.gradle.spotless.SpotlessPlugin
}

subprojects {
  apply from: "https://raw.githubusercontent.com/adazza/adazza-gradle/${gradleBranch}/adazza-scala.gradle"
  spotless {
    scala {
      if (new File(rootDir, ".scalafmt.conf").exists()) {
        scalafmt('1.5.0').configFile(new File(rootDir, ".scalafmt.conf").getAbsolutePath())
      } else {
        scalafmt('1.5.0')
      }
    }
  }
}
